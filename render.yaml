services:
  # Backend API Service
  - type: web
    name: socialflow-backend
    env: node
    rootDir: backend
    buildCommand: npm install && npx prisma generate
    startCommand: npx prisma migrate deploy && npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 5000
      - key: JWT_SECRET
        value: LEv5DmQSg0L9gz6B2wtFW9HcTmL8VwAtU82r8l9ky5lQm9t41TfhQJm3bBFPuTSO4KX2QegqOJxnTLcRlWjugcoZsTeRu0OaRhwMRYsdyfnxP
      - key: CLIENT_URL
        value: https://auto-socialize.vercel.app
      - key: DATABASE_URL
        value: "" # Add your Neon PostgreSQL connection string here
      - key: HF_TOKEN
        value: "" # Add your Hugging Face token
      - key: OPENAI_API_KEY
        value: "" # Add your OpenAI API key
      - key: CLOUDINARY_CLOUD_NAME
        value: didphkw9a
      - key: CLOUDINARY_API_KEY
        value: 455665947111787
      - key: CLOUDINARY_API_SECRET
        value: "" # Add your Cloudinary API secret
      - key: FACEBOOK_APP_ID
        value: 1651763742686740
      - key: FACEBOOK_APP_SECRET
        value: "" # Add your Facebook app secret
      - key: INSTAGRAM_ACCESS_TOKEN
        value: "" # Add your Instagram access token
      - key: INSTAGRAM_REDIRECT_URI
        generateValue: https://$RENDER_SERVICE_NAME.onrender.com/api/instagram/oauth/callback

# Using external Neon PostgreSQL database - no need for built-in database

# üìã DEPLOYMENT INSTRUCTIONS:
#
# 1. üóÑÔ∏è CREATE DATABASE (2 minutes):
#    - Go to https://console.neon.tech
#    - Sign up (free) ‚Üí Create project "socialflow"
#    - Copy your PostgreSQL connection string
#
# 2. üöÄ DEPLOY ON RENDER (3 minutes):
#    - Go to https://dashboard.render.com
#    - Sign up ‚Üí Connect GitHub
#    - Click "New" ‚Üí "Blueprint" 
#    - Connect this repository
#    - Render will read this file and create both services!
#
# 3. ‚öôÔ∏è SET REQUIRED VARIABLES (2 minutes):
#    Go to your backend service ‚Üí Environment tab:
#    - DATABASE_URL = your_neon_connection_string
#    - JWT_SECRET = generate_32_character_secret
#
# 4. ‚úÖ DONE! (2 minutes):
#    - Both services will deploy automatically
#    - Frontend: https://socialflow-frontend.onrender.com
#    - Backend: https://socialflow-backend.onrender.com
#
# üîë Generate JWT Secret:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# üéØ Total Time: ~10 minutes for full deployment!
#
# üìà ADD FEATURES LATER:
# - Instagram: Add FACEBOOK_APP_ID and FACEBOOK_APP_SECRET
# - AI Content: Add GEMINI_API_KEY or HF_TOKEN  
# - File Uploads: Add Cloudinary credentials
# - Email: Add SMTP credentials
#
# üÜò TROUBLESHOOTING:
# - Check logs in Render dashboard
# - Verify environment variables are set
# - Test database connection
# - Ensure both services show "Live" status